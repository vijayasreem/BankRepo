<?xml version="1.0" encoding="UTF-8"?>
<Trigger xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>45.0</apiVersion>
    <description>Process credit card trigger</description>
    <status>Active</status>
    <triggerSource>0</triggerSource>
    <triggerName>ProcessCreditCardPayment</triggerName>
    <type>Opportunity</type>
    <booleanFilter>1</booleanFilter>
    <content>ProcessCreditCardPayment on Opportunity (after insert, before update)</content>
    <!-- The following code represents the code in the user story -->
    <LongText>
    Set<Id> ProcessedOpportunitiesIds = new Set<Id>();
    List<Opportunity> oppsToProcess = Trigger.new;
    for(Opportunity opp : oppsToProcess) {
        if(opp.Payment_Method__c == 'Credit Card') {
            // Process the credit card payment
            // Code to process the credit card payment
            if(/* Payment successful */) {
                ProcessedOpportunitiesIds.add(opp.Id);
            }
        }
    }
    if(ProcessedOpportunitiesIds.size() > 0) {
        // Code to send the notification to the user
    }
    </LongText>
    <length>-1</length>
    <eventType>after insert,before update</eventType>
</Trigger>